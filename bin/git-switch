#!/bin/sh

# Usage: git switch [<branch-name>]
#
# If local <branch-name> exists:
#   - git checkout <branch-name>
#   - git pull origin <branch-name>

# If local <branch-name> not exist:
#   - git fetch
#   - git checkout --track origin/<branch-name>

branch_name=$1
branch_exists_locally=`git show-ref refs/heads/$1`

if [ -n "$branch_exists_locally" ]; then
  echo "Branch already exists."
  git checkout $branch_name
  echo "Updating..."
  git pull origin $branch_name
else
  echo "Branch not found. Fetching from server..."
  git fetch
  git checkout --track origin/$branch_name
fi

